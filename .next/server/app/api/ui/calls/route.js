"use strict";(()=>{var e={};e.id=405,e.ids=[405],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:e=>{e.exports=import("pg")},9291:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{originalPathname:()=>m,patchFetch:()=>u,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>y,staticGenerationAsyncStorage:()=>d});var n=t(9303),i=t(8716),o=t(670),s=t(890),c=e([s]);s=(c.then?(await c)():c)[0];let l=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/ui/calls/route",pathname:"/api/ui/calls",filename:"route",bundlePath:"app/api/ui/calls/route"},resolvedPagePath:"C:\\Users\\nicho\\OneDrive\\Desktop\\SyncedUpCallAI\\src\\app\\api\\ui\\calls\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:y}=l,m="/api/ui/calls/route";function u(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:d})}r()}catch(e){r(e)}})},890:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{GET:()=>s});var n=t(7070),i=t(6341),o=e([i]);async function s(){let{rows:e}=await i.db.query(`
    select c.id, c.started_at, c.duration_sec, c.disposition, c.recording_url,
           ct.primary_phone, ag.name as agent, an.reason_primary, an.summary
    from calls c
    left join contacts ct on ct.id=c.contact_id
    left join agents ag on ag.id=c.agent_id
    left join analyses an on an.call_id=c.id
    order by c.started_at desc
    limit 500
  `);return n.NextResponse.json({rows:e})}i=(o.then?(await o)():o)[0],r()}catch(e){r(e)}})},6341:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{db:()=>s});var n=t(8678),i=e([n]);let o=new(n=(i.then?(await i)():i)[0]).default.Pool({connectionString:process.env.DATABASE_URL}),s={query:(e,a)=>o.query(e,a),one:async(e,a)=>(await o.query(e,a)).rows[0],oneOrNone:async(e,a)=>(await o.query(e,a)).rows[0]||null,none:async(e,a)=>{await o.query(e,a)}};r()}catch(e){r(e)}})}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[276,972],()=>t(9291));module.exports=r})();